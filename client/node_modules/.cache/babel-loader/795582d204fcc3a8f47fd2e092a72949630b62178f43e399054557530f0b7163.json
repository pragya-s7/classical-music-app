{"ast":null,"code":"var _jsxFileName = \"/Users/pragya/Documents/Projects/classical-music-app/client/src/components/Library.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './Library.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Library({\n  userId\n}) {\n  _s();\n  const [library, setLibrary] = useState([]);\n  const [statusFilter, setStatusFilter] = useState('all');\n  const [loading, setLoading] = useState(true);\n  const [statuses, setStatuses] = useState({});\n\n  // Fetch available statuses\n  useEffect(() => {\n    fetch('http://localhost:4000/api/piece-statuses').then(res => res.json()).then(data => setStatuses(data));\n  }, []);\n\n  // Fetch user's library\n  useEffect(() => {\n    setLoading(true);\n    fetch(`http://localhost:4000/api/users/${userId}/library`).then(res => res.json()).then(data => {\n      setLibrary(data);\n      setLoading(false);\n    }).catch(error => {\n      console.error('Error fetching library:', error);\n      setLoading(false);\n    });\n  }, [userId]);\n  const updatePieceStatus = async (pieceId, newStatus) => {\n    try {\n      const response = await fetch(`http://localhost:4000/api/users/${userId}/library/${pieceId}`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          status: newStatus\n        })\n      });\n      if (!response.ok) throw new Error('Failed to update status');\n      const updatedEntry = await response.json();\n      setLibrary(library.map(entry => entry.pieceId === pieceId ? updatedEntry : entry));\n    } catch (error) {\n      console.error('Error updating piece status:', error);\n    }\n  };\n  const filteredLibrary = statusFilter === 'all' ? library : library.filter(entry => entry.status === statusFilter);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"library\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"My Music Library\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"library-filters\",\n      children: /*#__PURE__*/_jsxDEV(\"select\", {\n        value: statusFilter,\n        onChange: e => setStatusFilter(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"all\",\n          children: \"All Pieces\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), Object.values(statuses).map(status => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: status,\n          children: status\n        }, status, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"library-grid\",\n      children: filteredLibrary.map(entry => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"library-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: entry.piece.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: entry.piece.composer\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"status-section\",\n          children: /*#__PURE__*/_jsxDEV(\"select\", {\n            value: entry.status,\n            onChange: e => updatePieceStatus(entry.pieceId, e.target.value),\n            children: Object.values(statuses).map(status => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: status,\n              children: status\n            }, status, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"piece-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Added: \", new Date(entry.dateAdded).toLocaleDateString()]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this), entry.rating && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"My Rating: \", entry.rating, \"/10\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 32\n          }, this), entry.timeSpentPracticing > 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Practice Time: \", entry.timeSpentPracticing, \" minutes\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }, this)]\n      }, entry.pieceId, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n}\n_s(Library, \"FCMF7z2W9Q+3OLxidd9/XZOH8No=\");\n_c = Library;\nexport default Library;\nvar _c;\n$RefreshReg$(_c, \"Library\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","Library","userId","_s","library","setLibrary","statusFilter","setStatusFilter","loading","setLoading","statuses","setStatuses","fetch","then","res","json","data","catch","error","console","updatePieceStatus","pieceId","newStatus","response","method","headers","body","JSON","stringify","status","ok","Error","updatedEntry","map","entry","filteredLibrary","filter","children","fileName","_jsxFileName","lineNumber","columnNumber","className","value","onChange","e","target","Object","values","piece","title","composer","Date","dateAdded","toLocaleDateString","rating","timeSpentPracticing","_c","$RefreshReg$"],"sources":["/Users/pragya/Documents/Projects/classical-music-app/client/src/components/Library.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './Library.css';\n\nfunction Library({ userId }) {\n  const [library, setLibrary] = useState([]);\n  const [statusFilter, setStatusFilter] = useState('all');\n  const [loading, setLoading] = useState(true);\n  const [statuses, setStatuses] = useState({});\n\n  // Fetch available statuses\n  useEffect(() => {\n    fetch('http://localhost:4000/api/piece-statuses')\n      .then(res => res.json())\n      .then(data => setStatuses(data));\n  }, []);\n\n  // Fetch user's library\n  useEffect(() => {\n    setLoading(true);\n    fetch(`http://localhost:4000/api/users/${userId}/library`)\n      .then(res => res.json())\n      .then(data => {\n        setLibrary(data);\n        setLoading(false);\n      })\n      .catch(error => {\n        console.error('Error fetching library:', error);\n        setLoading(false);\n      });\n  }, [userId]);\n\n  const updatePieceStatus = async (pieceId, newStatus) => {\n    try {\n      const response = await fetch(`http://localhost:4000/api/users/${userId}/library/${pieceId}`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ status: newStatus }),\n      });\n      \n      if (!response.ok) throw new Error('Failed to update status');\n      \n      const updatedEntry = await response.json();\n      setLibrary(library.map(entry => \n        entry.pieceId === pieceId ? updatedEntry : entry\n      ));\n    } catch (error) {\n      console.error('Error updating piece status:', error);\n    }\n  };\n\n  const filteredLibrary = statusFilter === 'all'\n    ? library\n    : library.filter(entry => entry.status === statusFilter);\n\n  if (loading) return <div>Loading...</div>;\n\n  return (\n    <div className=\"library\">\n      <h1>My Music Library</h1>\n      \n      <div className=\"library-filters\">\n        <select \n          value={statusFilter} \n          onChange={(e) => setStatusFilter(e.target.value)}\n        >\n          <option value=\"all\">All Pieces</option>\n          {Object.values(statuses).map(status => (\n            <option key={status} value={status}>{status}</option>\n          ))}\n        </select>\n      </div>\n\n      <div className=\"library-grid\">\n        {filteredLibrary.map(entry => (\n          <div key={entry.pieceId} className=\"library-item\">\n            <h3>{entry.piece.title}</h3>\n            <p>{entry.piece.composer}</p>\n            <div className=\"status-section\">\n              <select\n                value={entry.status}\n                onChange={(e) => updatePieceStatus(entry.pieceId, e.target.value)}\n              >\n                {Object.values(statuses).map(status => (\n                  <option key={status} value={status}>{status}</option>\n                ))}\n              </select>\n            </div>\n            <div className=\"piece-details\">\n              <p>Added: {new Date(entry.dateAdded).toLocaleDateString()}</p>\n              {entry.rating && <p>My Rating: {entry.rating}/10</p>}\n              {entry.timeSpentPracticing > 0 && (\n                <p>Practice Time: {entry.timeSpentPracticing} minutes</p>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default Library; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}